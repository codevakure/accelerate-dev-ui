<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>hhs_pacd-frontend-phase2 documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">hhs_pacd-frontend-phase2 documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>AuthenticationService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/Services/authentication.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#attrresponse">attrresponse</a>
                            </li>
                            <li>
                                <a href="#cognitoUser">cognitoUser</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#confirmAuthCode">confirmAuthCode</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getAttributes">getAttributes</a>
                            </li>
                            <li>
                                <a href="#getAuthenticatedUser">getAuthenticatedUser</a>
                            </li>
                            <li>
                                <a href="#isLoggedIn">isLoggedIn</a>
                            </li>
                            <li>
                                <a href="#logout">logout</a>
                            </li>
                            <li>
                                <a href="#newPassword">newPassword</a>
                            </li>
                            <li>
                                <a href="#register">register</a>
                            </li>
                            <li>
                                <a href="#signIn">signIn</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/Services/authentication.service.ts:21</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="confirmAuthCode"></a>
                    <span class="name">
                        <b>
                            confirmAuthCode
                        </b>
                        <a href="#confirmAuthCode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>confirmAuthCode(code)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="168"
                            class="link-to-prism">src/app/Services/authentication.service.ts:168</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>code</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAttributes"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getAttributes
                        </b>
                        <a href="#getAttributes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAttributes()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="242"
                            class="link-to-prism">src/app/Services/authentication.service.ts:242</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAuthenticatedUser"></a>
                    <span class="name">
                        <b>
                            getAuthenticatedUser
                        </b>
                        <a href="#getAuthenticatedUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getAuthenticatedUser()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="297"
                            class="link-to-prism">src/app/Services/authentication.service.ts:297</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isLoggedIn"></a>
                    <span class="name">
                        <b>
                            isLoggedIn
                        </b>
                        <a href="#isLoggedIn"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isLoggedIn()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="293"
                            class="link-to-prism">src/app/Services/authentication.service.ts:293</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="logout"></a>
                    <span class="name">
                        <b>
                            logout
                        </b>
                        <a href="#logout"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>logout()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="304"
                            class="link-to-prism">src/app/Services/authentication.service.ts:304</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="newPassword"></a>
                    <span class="name">
                        <b>
                            newPassword
                        </b>
                        <a href="#newPassword"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>newPassword(npassword)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="270"
                            class="link-to-prism">src/app/Services/authentication.service.ts:270</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>npassword</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="register"></a>
                    <span class="name">
                        <b>
                            register
                        </b>
                        <a href="#register"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>register(username, password)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="25"
                            class="link-to-prism">src/app/Services/authentication.service.ts:25</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>username</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>password</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="signIn"></a>
                    <span class="name">
                        <b>
                            signIn
                        </b>
                        <a href="#signIn"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>signIn(username, password)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="189"
                            class="link-to-prism">src/app/Services/authentication.service.ts:189</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>username</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>password</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="attrresponse"></a>
                        <span class="name">
                            <b>
                            attrresponse</b>
                            <a href="#attrresponse"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/app/Services/authentication.service.ts:20</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cognitoUser"></a>
                        <span class="name">
                            <b>
                            cognitoUser</b>
                            <a href="#cognitoUser"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/Services/authentication.service.ts:21</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Http, Response, Headers, RequestOptions } from &#x27;@angular/http&#x27;;
import { Observable } from &#x27;rxjs/Observable&#x27;;
import { AuthenticationDetails, CognitoUserPool, CognitoUser, CognitoUserAttribute } from &#x27;amazon-cognito-identity-js&#x27;;
import &#x27;rxjs/add/operator/do&#x27;;
import &#x27;rxjs/add/operator/catch&#x27;;
import &#x27;rxjs/add/operator/map&#x27;;
import &#x27;rxjs/add/observable/throw&#x27;;

const poolData &#x3D; {
  UserPoolId: &#x27;us-east-1_PKHD3KUtb&#x27;, 
  ClientId: &#x27;7pmo5idudaltoo013f2u4nku36&#x27; 
};

const userPool &#x3D; new CognitoUserPool(poolData);
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class AuthenticationService {
  attrresponse: any;
  cognitoUser: any;
  constructor() { }


  register(username, password) {

    const attributeList &#x3D; [];

    var dataEmail &#x3D; {
      Name: &#x27;email&#x27;,
      Value: &#x27;joeliyn.tran@hhs.gov&#x27;
    };
    var dataPhoneNumber &#x3D; {
      Name: &#x27;phone_number&#x27;,
      Value: &#x27;+19999999999&#x27;
    };
    var dataFamilyName &#x3D; {
      Name: &#x27;family_name&#x27;,
      Value: &#x27;Tran&#x27;
    }
    var dataGivenName &#x3D; {
      Name: &#x27;given_name&#x27;,
      Value: &#x27;Joeliyn&#x27;
    }
    var dataPicture &#x3D; {
      Name: &#x27;picture&#x27;,
      Value: &#x27;https://www.tenforums.com/geek/gars/images/2/types/thumb_User_Accounts.png&#x27;
    }
    var dataRole &#x3D; {
      Name: &#x27;custom:role&#x27;,
      Value: &#x27;Contracting Officer&#x27;
    }
    var dataOpdivision &#x3D; {
      Name: &#x27;custom:opdivision&#x27;,
      Value: &#x27;Agency for Healthcare Research and Quality, AHRQ&#x27;
    }
    var dataCode &#x3D; {
      Name: &#x27;custom:code&#x27;,
      Value: &#x27;65FCME&#x27;
    }
    var dataAsapecialist &#x3D; {
      Name: &#x27;custom:asapecialist&#x27;,
      Value: &#x27;Michelle Smith, michelle.smith@hhs.gov, 555-555-5555&#x27;
    }
    var dataWarrant &#x3D; {
      Name: &#x27;custom:warrant&#x27;,
      Value: &#x27;High&#x27;
    }
    var dataPo &#x3D; {
      Name: &#x27;custom:po&#x27;,
      Value: &#x27;Administration for Children &amp; Families, ACF, Mariah Carey, mariah.carey@hhs.gov, 555-555-5555&#x27;
    }
    var dataCo &#x3D; {
      Name: &#x27;custom:cntrctofc&#x27;,
      Value: &#x27;Imneet&#x27;
    }
    var dataCoContactInf &#x3D; {
      Name: &#x27;custom:coContactInf&#x27;,
      Value: &#x27;200 Independence Ave SW Washington DC 20201&#x27;
    }
    var dataCoPhoneNum &#x3D; {
      Name: &#x27;custom:coPhonenNum&#x27;,
      Value: &#x27;+18577569131&#x27;
    }
    var dataCoEmail &#x3D; {
      Name: &#x27;custom:coEmail&#x27;,
      Value: &#x27;imnnetpal.brar@aurotechcorp.com&#x27;
    }
    var dataBo &#x3D; {
      Name: &#x27;custom:budgtaprv&#x27;,
      Value: &#x27;Daren&#x27;
    }
    var dataBoContactInf &#x3D; {
      Name: &#x27;custom:baContatctInf&#x27;,
      Value: &#x27;8701 Georgia Avenue Silver Spring, MD 20910&#x27;
    }
    var dataBoPhoneNum &#x3D; {
      Name: &#x27;custom:baPhoneNum&#x27;,
      Value: &#x27;+19998887776&#x27;
    }
    var dataBoEmail &#x3D; {
      Name: &#x27;custom:baEmail&#x27;,
      Value: &#x27;daren.arnold@aurotechcorp.com&#x27;
    }


    var attributeEmail &#x3D; new CognitoUserAttribute(dataEmail);
    var attributePhoneNumber &#x3D; new CognitoUserAttribute(dataPhoneNumber);
    var attributeFamilyName &#x3D; new CognitoUserAttribute(dataFamilyName);
    var attributeGivenName &#x3D; new CognitoUserAttribute(dataGivenName);
    var attributePicture &#x3D; new CognitoUserAttribute(dataPicture);
    var attributeRole &#x3D; new CognitoUserAttribute(dataRole);
    var attributeOpdivision &#x3D; new CognitoUserAttribute(dataOpdivision);
    var attributeCode &#x3D; new CognitoUserAttribute(dataCode);
    var attributeAsapecialist &#x3D; new CognitoUserAttribute(dataAsapecialist);
    var attributeWarrant &#x3D; new CognitoUserAttribute(dataWarrant);
    var attributePo &#x3D; new CognitoUserAttribute(dataPo);
    var attributeCo &#x3D; new CognitoUserAttribute(dataCo);
    var attributeCoContactInf &#x3D; new CognitoUserAttribute(dataCoContactInf);
    var attributeCoPhonenNum &#x3D; new CognitoUserAttribute(dataCoPhoneNum);
    var attributeCoEmail &#x3D; new CognitoUserAttribute(dataCoEmail);
    
    var attributeBo &#x3D; new CognitoUserAttribute(dataBo);
    var attributeBoContactInf &#x3D; new CognitoUserAttribute(dataBoContactInf);
    var attributeBoPhonenNum &#x3D; new CognitoUserAttribute(dataBoPhoneNum);
    var attributeBoEmail &#x3D; new CognitoUserAttribute(dataBoEmail);
    var attributeCode &#x3D; new CognitoUserAttribute(dataCode);

    attributeList.push(attributeEmail);
    attributeList.push(attributePhoneNumber);
    attributeList.push(attributeFamilyName);
    attributeList.push(attributeGivenName);
    attributeList.push(attributePicture);
    attributeList.push(attributeRole);
    attributeList.push(attributeOpdivision);
    attributeList.push(attributeCode);
    attributeList.push(attributeAsapecialist);
    attributeList.push(attributeWarrant);
    attributeList.push(attributePo);
    attributeList.push(attributeCo);
    attributeList.push(attributeCoContactInf);
    attributeList.push(attributeCoPhonenNum);
    attributeList.push(attributeCoEmail);
    attributeList.push(attributeBo);
    attributeList.push(attributeBoContactInf);
    attributeList.push(attributeBoPhonenNum);
    attributeList.push(attributeBoEmail);



    return Observable.create(observer &#x3D;&gt; {
      userPool.signUp(username, password, attributeList, null, (err, result) &#x3D;&gt; {
        //console.log(&#x27;list of attributes are&#x27;, attributeList)
        if (err) {
          //console.log(&quot;signUp error&quot;, err);
          observer.error(err);
        }

        this.cognitoUser &#x3D; result.user;
        //console.log(&quot;signUp success&quot;, result);
        observer.next(result);
        observer.complete();
      });
    });

  }

  confirmAuthCode(code) {
    const user &#x3D; {
      Username: this.cognitoUser.username,
      Pool: userPool
    };
    return Observable.create(observer &#x3D;&gt; {
      const cognitoUser &#x3D; new CognitoUser(user);
      cognitoUser.confirmRegistration(code, true, function (err, result) {
        if (err) {
          //console.log(err);
          observer.error(err);
        }
        //console.log(&quot;confirmAuthCode() success&quot;, result);
        observer.next(result);
        observer.complete();
      });


    });
  }

  signIn(username, password) {
    const authenticationData &#x3D; {
      Username: username,
      Password: password,
    };
    const authenticationDetails &#x3D; new AuthenticationDetails(authenticationData);

    const userData &#x3D; {
      Username: username,
      Pool: userPool
    };
    ////console.log(userData);
    const cognitoUser &#x3D; new CognitoUser(userData);

    return Observable.create(observer &#x3D;&gt; {
      cognitoUser.authenticateUser(authenticationDetails, {
        onSuccess: function (result) {
          // //console.log(&#x27;access token + &#x27; + result.getAccessToken().getJwtToken());
          // //console.log(&#x27;idToken + &#x27; + result.getIdToken().getJwtToken());
          // //console.log(result);
          ////console.log(&#x27;idToken + &#x27; ,result.getIdToken().payload[&#x27;cognito:groups&#x27;]);
          // //console.log(result);
          observer.next(result);
          observer.complete();

        },
        onFailure: function (err) {
          //console.log(err);
          observer.error(err);
        },
        newPasswordRequired: function (authenticationDetails, requiredAttributes) {
          cognitoUser.completeNewPasswordChallenge(
            password,
            {},
            {
              onSuccess: (user) &#x3D;&gt; {
                //console.log(&#x27;success hello&#x27;, user);
              },
              onFailure: (error) &#x3D;&gt; {
                //console.log(error);
              },

            },
          );
        }
      });


    });


  }

  public getAttributes() {

    return Observable.create(observer &#x3D;&gt; {
      var cognitoUser &#x3D; userPool.getCurrentUser();
      cognitoUser.getSession(function (err, session) {
        if (err) {
          alert(err);
          return;
        }
        ////console.log(&#x27;session validity: &#x27; + session.isValid());
      });

      return cognitoUser.getUserAttributes(function (err, result) {
        if (err) {
          alert(err);
          return;
        }
        observer.next(JSON.parse(JSON.stringify(result)));
        observer.complete();
        // //console.log(JSON.parse(JSON.stringify(result)));
        // //console.log(JSON.parse(JSON.stringify(result)))
        // return JSON.parse(JSON.stringify(result))
      });
    });
  }



  newPassword(npassword) {
    const user &#x3D; {
      Username: this.cognitoUser.username,
      Pool: userPool
    };
    return Observable.create(observer &#x3D;&gt; {
      const cognitoUser &#x3D; new CognitoUser(user);
      cognitoUser.completeNewPasswordChallenge(
        npassword,
        {},
        {
          onSuccess: (user) &#x3D;&gt; {
            //console.log(&#x27;success&#x27;, user);
          },
          onFailure: (error) &#x3D;&gt; {
            //console.log(error);
          },

        },
      );
    });
  }

  isLoggedIn() {
    return userPool.getCurrentUser() !&#x3D; null;
  }

  getAuthenticatedUser() {
    // gets the current user from the local storage
    return userPool.getCurrentUser();

  }


  logout() {
    this.cognitoUser &#x3D; null;
    this.getAuthenticatedUser().signOut();
  }


}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AuthenticationService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
